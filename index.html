<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Atividade 1</title>
</head>

<body>

    <header>
        <h1>Atividade 1</h1>
        <nav>
            <li><a class="btn-title" href="home">Home</a></li>
            <li><a class="btn-title" href="Rodape">Rodapé</a></li>
        </nav>
    </header>

    <h2 id="titulo">Aviões</h2>
    <section>
        <section id="Aviao">
            <img class="img-aviao" src="https://images.pexels.com/photos/46148/aircraft-jet-landing-cloud-46148.jpeg?auto=compress&cs=tinysrgb&w=300" alt="Imagem de avião voando em meio a nuvens">
            <img class="img-aviao" src="https://images.pexels.com/photos/164589/pexels-photo-164589.jpeg?auto=compress&cs=tinysrgb&w=300" alt="Imagem de avião decolando">
            <img class="img-aviao" src="https://images.pexels.com/photos/358220/pexels-photo-358220.jpeg?auto=compress&cs=tinysrgb&w=300" alt="Imagem de avião no solo">
        </section>
    </section>

    <h2 id="titulo">Mudar Cor</h2>
    <input type="button" value="Mudar cor dos botões" onclick="mudarCor()">

    <h2 id="titulo">Adicionar Item e Remover</h2>
    <input type="text" id="itemLista" placeholder="Digite algo para sua lista aqui">
    <input type="button" value="Adicionar Item" onclick="criarLista()">

    <ul id="minhaLista">

    </ul>

    <h2 id="titulo">Consumir dados de uma API(GET)</h2>
    <input type="button" value="chamarApi" onclick="consumirAPI()">
    <div>
        <p>Mensagem API: <input type="text" id="API"></p>
        <P>Cidade: <input type="text" id="cidade"></P>
        <p>Faculdade: <input type="text" id="faculdade"></p>
    </div>

    <h2 id="titulo">Enviar dados para a API(POST)</h2>

    <form action="post" id="formulario">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" required>
        <br><br>

        <label for="email">E-mail:</label>
        <input type="email" id="email" name="email" required>
        <br><br>

        <button type="submit" onclick="enviarDadosAPI()">Enviar</button>
    </form>

    <h3>Resposta do Servidor:</h3>
    <p id="resposta"></p>

    <h2 id="titulo">Exibir dados retornados em tabela</h2>
<button onclick="receberDadosTabela()">Carregar Dados</button>
<table id="dadosTabela" border="1">
    <thead>
        <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Idade</th>
        </tr>
    </thead>
    <tbody>
        
    </tbody>
</table>


    <footer>
        <img class="img-footer" src="https://hpg.com.br/wp-content/uploads/2025/01/portal-do-aluno-fiap-entrar-login-e-telefone.png" alt="Login da FIAP">
        <p>Amanda Cornelsen</p>
        <a class="btn-footer" href="https://github.com/AmandaCornelsen?tab=repositories">Github</a>
    </footer>

</body>

    <script>
        function mudarCor() {
            let btn = document.querySelectorAll(".btn-title, .btn-footer");

            for (let i = 0; i < btn.length; i++) {
                
                if(btn[i].style.backgroundColor === "pink") {
                    btn[i].style.backgroundColor = "blue";
                } else {
                   btn[i].style.backgroundColor = "pink";
                }
            }
        }

        function criarLista() {
            let adicionarItem = document.getElementById("itemLista");
            let lista = document.getElementById("minhaLista");

            if(adicionarItem.value.trim() !== "") {
                let criarItem = document.createElement("li");
                criarItem.textContent = adicionarItem.value;

                criarItem.ondblclick = function() {
                    lista.removeChild(criarItem);
                };

                lista.appendChild(criarItem);
                input.value ="";
            } else {
                alert("Insira um valor no campo de texto antes de adicionar item")
            }
        }
    
        function consumirAPI(){
            fetch("http://demo3298209.mockable.io/lista_exercicio")
            .then(response => response.json())
            .then(data => tratarDados(data))
            .catch(error => console.log(error))
        }

        function tratarDados(data) {
            console.log(data)
            document.getElementById("API").value = data.mensagem;
            document.getElementById("cidade").value = data.cidade;
            document.getElementById("faculdade").value = data.faculdade;
        }

        function enviarDadosAPI() {
            document.getElementById("formulario").addEventListener("submit", async function(event) {
            event.preventDefault(); 

            let nome = document.getElementById("nome").value;
            let email = document.getElementById("email").value;

            let dados = {
                nome: nome,
                email: email
            };

            try {
                let response = await fetch("http://demo3298209.mockable.io/formulariopost", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(dados)
                });

                let respostaServidor = await response.json();

                document.getElementById("resposta").innerText = JSON.stringify(respostaServidor, null, 2);

            } catch (error) {
                document.getElementById("resposta").innerText = "Erro ao enviar os dados.";
                console.error("Erro:", error);
            }
        })
        }

        function receberDadosTabela() {
            fetch("http://demo3298209.mockable.io/usuariotabela")
            .then(response => response.json())
       
            .then(data => { 

            let corpoTabela = document.querySelector("#dadosTabela tbody");
            corpoTabela.innerHTML = "";

            data.forEach(user => {
                let linha = document.createElement("tr");

                linha.innerHTML = `
                    <td>${user.nome}</td>
                    <td>${user.email}</td>
                    <td>${user.idade}</td>
                `;

                corpoTabela.appendChild(linha);
            });
        })
        .catch(error => console.error("Erro ao buscar os dados:", error));
        }
    </script>

</html>